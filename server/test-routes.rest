###
# HR-SM API Route Testing
# Use this file with REST Client VSCode extension or Postman
# Replace {{baseUrl}} with your actual server URL (e.g., http://localhost:5000)
# Replace {{token}} with actual JWT token after login
###

@baseUrl = http://localhost:5000
@token = your-jwt-token-here
@userId = user-id-here
@employeeId = employee-id-here

### Root Endpoint
GET {{baseUrl}}

### ============================================
### USER ROUTES
### ============================================

### Login
POST {{baseUrl}}/api/users/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "password123",
  "role": "admin"
}

### Get All Users
GET {{baseUrl}}/api/users
Cookie: token={{token}}

### Get User By ID
GET {{baseUrl}}/api/users/{{userId}}
Cookie: token={{token}}

### Create User
POST {{baseUrl}}/api/users
Cookie: token={{token}}
Content-Type: application/json

{
  "username": "newuser",
  "email": "newuser@example.com",
  "password": "password123",
  "school": "school-id-here",
  "role": "employee"
}

### Update User
PUT {{baseUrl}}/api/users/{{userId}}
Cookie: token={{token}}
Content-Type: application/json

{
  "profile": {
    "firstName": "Updated",
    "lastName": "Name"
  }
}

### Delete User
DELETE {{baseUrl}}/api/users/{{userId}}
Cookie: token={{token}}

### ============================================
### ATTENDANCE ROUTES
### ============================================

### Get All Attendance
GET {{baseUrl}}/api/attendance
Cookie: token={{token}}

### Check In
POST {{baseUrl}}/api/attendance/check-in
Cookie: token={{token}}
Content-Type: application/json

{
  "employeeId": "{{employeeId}}",
  "method": "biometric",
  "location": "office"
}

### Check Out
POST {{baseUrl}}/api/attendance/check-out
Cookie: token={{token}}
Content-Type: application/json

{
  "employeeId": "{{employeeId}}",
  "method": "biometric",
  "location": "office"
}

### ============================================
### LEAVE ROUTES
### ============================================

### Get All Leaves
GET {{baseUrl}}/api/leaves
Cookie: token={{token}}

### Create Leave Request
POST {{baseUrl}}/api/leaves
Cookie: token={{token}}
Content-Type: application/json

{
  "leaveType": "annual",
  "startDate": "2024-12-01",
  "endDate": "2024-12-05",
  "reason": "Personal vacation"
}

### Approve Leave
PUT {{baseUrl}}/api/leaves/leave-id-here/approve
Cookie: token={{token}}

### Reject Leave
PUT {{baseUrl}}/api/leaves/leave-id-here/reject
Cookie: token={{token}}
Content-Type: application/json

{
  "reason": "Insufficient staff coverage"
}

### ============================================
### PERMISSION ROUTES (RBAC)
### ============================================

### Get All Permissions
GET {{baseUrl}}/api/permissions/all
Cookie: token={{token}}

### Get User Permissions
GET {{baseUrl}}/api/permissions/user/{{userId}}
Cookie: token={{token}}

### Add Permissions to User
POST {{baseUrl}}/api/permissions/user/{{userId}}/add
Cookie: token={{token}}
Content-Type: application/json

{
  "permissions": ["reports.view", "reports.export"],
  "reason": "Temporary access for audit"
}

### Remove Permissions from User
POST {{baseUrl}}/api/permissions/user/{{userId}}/remove
Cookie: token={{token}}
Content-Type: application/json

{
  "permissions": ["reports.export"],
  "reason": "Audit completed"
}

### ============================================
### DEPARTMENT ROUTES
### ============================================

### Get All Departments
GET {{baseUrl}}/api/departments
Cookie: token={{token}}

### Create Department
POST {{baseUrl}}/api/departments
Cookie: token={{token}}
Content-Type: application/json

{
  "name": "Engineering",
  "code": "ENG-001",
  "school": "school-id-here"
}

### ============================================
### PAYROLL ROUTES
### ============================================

### Get All Payrolls
GET {{baseUrl}}/api/payrolls
Cookie: token={{token}}

### Create Payroll
POST {{baseUrl}}/api/payrolls
Cookie: token={{token}}
Content-Type: application/json

{
  "employee": "{{employeeId}}",
  "period": {
    "startDate": "2024-01-01",
    "endDate": "2024-01-31"
  },
  "salary": {
    "base": 5000,
    "allowances": 500,
    "deductions": 200
  }
}

### ============================================
### ANNOUNCEMENT ROUTES
### ============================================

### Get All Announcements
GET {{baseUrl}}/api/announcements
Cookie: token={{token}}

### Create Announcement
POST {{baseUrl}}/api/announcements
Cookie: token={{token}}
Content-Type: application/json

{
  "title": "System Maintenance",
  "content": "The system will be down for maintenance on Sunday.",
  "priority": "high",
  "targetAudience": {
    "type": "all"
  }
}

### ============================================
### REPORT ROUTES
### ============================================

### Get All Reports
GET {{baseUrl}}/api/reports
Cookie: token={{token}}

### Create Report
POST {{baseUrl}}/api/reports
Cookie: token={{token}}
Content-Type: application/json

{
  "name": "Monthly Attendance Report",
  "reportType": "attendance",
  "dateRange": {
    "startDate": "2024-01-01",
    "endDate": "2024-01-31"
  }
}

### Execute Report
POST {{baseUrl}}/api/reports/report-id-here/execute
Cookie: token={{token}}

### ============================================
### SCHOOL ROUTES
### ============================================

### Get All Schools
GET {{baseUrl}}/api/schools
Cookie: token={{token}}

### Create School
POST {{baseUrl}}/api/schools
Cookie: token={{token}}
Content-Type: application/json

{
  "name": "Main Campus",
  "schoolCode": "MC-001",
  "arabicName": "الحرم الرئيسي"
}

### ============================================
### HOLIDAY ROUTES
### ============================================

### Get Holidays
GET {{baseUrl}}/api/holidays
Cookie: token={{token}}

### Fetch Suggestions
GET {{baseUrl}}/api/holidays/suggestions?year=2024&country=EG
Cookie: token={{token}}

### ============================================
### BACKUP ROUTES
### ============================================

### Get All Backups
GET {{baseUrl}}/api/backups
Cookie: token={{token}}

### Execute Backup
POST {{baseUrl}}/api/backups/backup-id-here/execute
Cookie: token={{token}}

### ============================================
### SECURITY AUDIT ROUTES
### ============================================

### Get Failed Logins
GET {{baseUrl}}/api/security/audit/failed-logins?userId={{userId}}
Cookie: token={{token}}

### Get User Activity
GET {{baseUrl}}/api/security/audit/user-activity/{{userId}}
Cookie: token={{token}}

### ============================================
### ANALYTICS ROUTES
### ============================================

### Get Dashboard Stats
GET {{baseUrl}}/api/analytics/dashboard
Cookie: token={{token}}

### Get Attendance Analytics
GET {{baseUrl}}/api/analytics/attendance?startDate=2024-01-01&endDate=2024-01-31
Cookie: token={{token}}
