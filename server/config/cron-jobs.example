# Log Maintenance Cron Jobs
# 
# Example cron job configurations for automated log maintenance
# Copy this file to your system's crontab or use a cron management tool
#
# To install these cron jobs:
# 1. Copy the desired entries to your crontab: crontab -e
# 2. Adjust paths to match your installation directory
# 3. Ensure the node executable path is correct
# 4. Test the scripts manually before scheduling

# Set environment variables for cron jobs
SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin
NODE_ENV=production

# Log cleanup - Run daily at 2:00 AM
0 2 * * * cd /path/to/your/app && node server/scripts/logCleanup.js >> /var/log/log-cleanup.log 2>&1

# Log cleanup with compression only - Run every 6 hours
0 */6 * * * cd /path/to/your/app && node server/scripts/logCleanup.js --skip-deletion >> /var/log/log-cleanup.log 2>&1

# Log health monitoring - Run every hour
0 * * * * cd /path/to/your/app && node server/scripts/logHealthMonitor.js --alert-thresholds --output /tmp/log-health-report.json >> /var/log/log-health.log 2>&1

# Weekly comprehensive cleanup - Run every Sunday at 3:00 AM
0 3 * * 0 cd /path/to/your/app && node server/scripts/logCleanup.js --verbose >> /var/log/log-cleanup-weekly.log 2>&1

# Monthly health report - Run on the 1st of each month at 4:00 AM
0 4 1 * * cd /path/to/your/app && node server/scripts/logHealthMonitor.js --disk-usage --alert-thresholds --format text --output /var/log/monthly-health-report.txt >> /var/log/log-health.log 2>&1

# Emergency cleanup for disk space - Run every 15 minutes if disk usage is critical
# This should be used with additional disk space monitoring
*/15 * * * * cd /path/to/your/app && df -h / | awk 'NR==2{if($5+0 > 90) system("node server/scripts/logCleanup.js --skip-rotation")}' >> /var/log/emergency-cleanup.log 2>&1

# Company-specific cleanup - Example for specific company
0 1 * * * cd /path/to/your/app && node server/scripts/logCleanup.js --company company123 >> /var/log/log-cleanup-company123.log 2>&1

# Dry run for testing - Run daily at 1:00 AM (safe to enable for testing)
# 0 1 * * * cd /path/to/your/app && node server/scripts/logCleanup.js --dry-run >> /var/log/log-cleanup-dryrun.log 2>&1

# Log rotation only - Run every 4 hours
0 */4 * * * cd /path/to/your/app && node server/scripts/logCleanup.js --skip-compression --skip-deletion >> /var/log/log-rotation.log 2>&1

# Statistics collection - Run every 30 minutes
*/30 * * * * cd /path/to/your/app && node server/scripts/logHealthMonitor.js --stats-only --format json --output /tmp/log-stats.json 2>/dev/null

# Alert on high disk usage - Run every 5 minutes
*/5 * * * * cd /path/to/your/app && node server/scripts/logHealthMonitor.js --alert-thresholds | grep -q "violations\|High disk usage" && echo "Log system alert: $(date)" | mail -s "Log System Alert" admin@yourcompany.com

# Backup log configuration - Run daily at 5:00 AM
0 5 * * * cd /path/to/your/app && tar -czf /backup/log-config-$(date +\%Y\%m\%d).tar.gz config/logging/ >> /var/log/config-backup.log 2>&1

# Clean up old backup files - Run weekly on Saturday at 6:00 AM
0 6 * * 6 find /backup -name "log-config-*.tar.gz" -mtime +30 -delete >> /var/log/backup-cleanup.log 2>&1

# Performance monitoring - Run every 2 hours during business hours
0 8-18/2 * * 1-5 cd /path/to/your/app && node server/scripts/logHealthMonitor.js --format csv --output /tmp/performance-$(date +\%H).csv 2>/dev/null

# Weekend maintenance - Run comprehensive cleanup on Saturday at midnight
0 0 * * 6 cd /path/to/your/app && node server/scripts/logCleanup.js --verbose && node server/scripts/logHealthMonitor.js --disk-usage --alert-thresholds --output /var/log/weekend-report.txt >> /var/log/weekend-maintenance.log 2>&1